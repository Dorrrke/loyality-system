# Модель накопительной системы интеренет магазина
Система представляет собой HTTP API со следующими требованиями к бизнес-логике:
1. регистрация, аутентификация и авторизация пользователей;
2. приём номеров заказов от зарегистрированных пользователей;
3. учёт и ведение списка переданных номеров заказов зарегистрированного пользователя;
4. учёт и ведение накопительного счёта зарегистрированного пользователя;
5. проверка принятых номеров заказов через систему расчёта баллов лояльности;
6. начисление за каждый подходящий номер заказа положенного вознаграждения на счёт лояльности пользователя.


## Описание эндпоинтов

* ``` POST /api/user/register ``` — регистрация пользователя;
* ``` POST /api/user/login ``` — аутентификация пользователя;
* ``` POST /api/user/orders ``` — загрузка пользователем номера заказа для расчёта;
* ``` GET /api/user/orders ``` — получение списка загруженных пользователем номеров заказов, статусов их обработки и информации о начислениях;
* ``` GET /api/user/balance ``` — получение текущего баланса счёта баллов лояльности пользователя;
* ``` POST /api/user/balance/withdraw ``` — запрос на списание баллов с накопительного счёта в счёт оплаты нового заказа;
* ``` GET /api/user/withdrawals ``` — получение информации о выводе средств с накопительного счёта пользователем.

## Дополнительное описание функционала
Сервис конфигурируется с помощю ключей или переменных окружения:
* -a флаг конфигурирования адреса сервера
* -r флаг для указания адреса сервиса расчета баллов лояльности 
* -d флаг содержащий данные базы данных для подключения
* RUN_ADDRESS переменная окружения для конфигурирования адреса сервера
* ACCRUAL_SYSTEM_ADDRESS переменная окружения для конфигурирования адреса системы расчета баллов лояльности
* DATABASE_URI переменная окружения содержащий данные базы данных для подключения 

Хендлеры сервиса описаны тестами

## Библиотеки и технологии
* Языки программирования: Go
* СУБД: PostgreSQL

## Запуск
В корне проекта находится Makefile при помощи которого можено собрать, запустить и протестировать систему.
Makefile имеет следующие возможности:
```
$ make help
Usage:
- build   Build project
- test    Run project tests
- run     Run project
- clean   Cache clean
- dep     download lib
- lint    Run linters
- help    Show help for each of the Makefile recipes.
```

